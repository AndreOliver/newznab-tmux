<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Newznab-tmux by DariusIII</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Newznab-tmux</h1>
        <p>Greatly improved jonnyboys newznab-tmux with additions from nZEDb (https://github.com/nZEDb/nZEDb)</p>
        <p class="view"><a href="https://github.com/DariusIII/newznab-tmux">View the Project on GitHub <small>DariusIII/newznab-tmux</small></a></p>
        <ul>
          <li><a href="https://github.com/DariusIII/newznab-tmux/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/DariusIII/newznab-tmux/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/DariusIII/newznab-tmux">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <p>I have forked jonnyboys newznab-tmux as he and the dev team have moved to another project (<a href="https://github.com/nZEDb/nZEDb">https://github.com/nZEDb/nZEDb</a>). I will try as much as i can to maintain and improve these tmux scripts, where possible and needed, as they are a valuable addendum to newznab+.
Support is given on irc.synirc.net #tmux channel.</p>

<p>I started adapting some of more interesting scripts from nZEDb, but they require tempering with newznab database, so use them at your own risk. By using newznab-tmux you will render your indexer incompatible with newznab (you can revert changes by forcing the svn checkout, it will replace the changed files. Newznab is not aware of the changes in database, so you are safe to leave them as they are). Scripts require PHP version &gt;= 5.5.x and Python 2.7x or newer.</p>

<h1>
<a id="steps-to-have-a-working-tmux-install" class="anchor" href="#steps-to-have-a-working-tmux-install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Steps to have a working tmux install:</h1>

<p>CD to the root of your newznab install, ie.  cd /var/www/newznab
 Next steps are very important:</p>

<pre><code>    If you are already a tmux user, you need to remove the .git folder from tmux folder. 

    git init 
    git remote add origin https://github.com/DariusIII/newznab-tmux.git
    git fetch
    git reset --hard origin/your_wanted_branch, ie. git reset --hard origin/master
    git checkout -t origin/your_wanted_branch, ie. git checkout -t origin/master

There is a lib folder in main tmux folder. In that folder you will find DB folder. If you are setting up tmux for the first time, import db.sql using cli (mysql -u {â”¤your username} -p newznab &lt; db.sql).
After importing db.sql you need to run the patchDB.php from same folder. After the last patch is applied, you need to manualy apply the next patch labeled XXXX~settings.sql (XXXX is a patch number that is different on dev/master(0122) and regexless branch(0149)). 
When you have manualy applied that patch, you can use the new database updater located in /path/to/newznab/cli/ and run update_db.php true and it will apply the rest of the patches (if they exist).
After these steps, patchDB is unusable anymore and you need to use the new update_db.php script in cli folder.

You need to chmod to 777 following folders now:
resources/*
libs/smarty/templates_c
nzbfiles/ 

You need to add an alias to your apache/nginx conf of your indexer:
Alias /covers /path/to/newznab/resources/covers
</code></pre>

<h1>
<a id="yenc" class="anchor" href="#yenc" aria-hidden="true"><span class="octicon octicon-link"></span></a>yEnc:</h1>

<p>Note: You have 3 choices,
        you can install simple_php_yenc_decode which offers the best performance,
        installing yydecode, which offers good performance,
        or using PHP (no install required) which is very slow.
        You can change these at any time if you have issues with any of the 3.</p>

<p>simple_php_yenc_decode:</p>

<pre><code>   sudo apt-get install git
   cd ~/
   git clone https://github.com/kevinlekiller/simple_php_yenc_decode
   cd simple_php_yenc_decode/
   sh ubuntu.sh
   cd ~/
   rm -rf simple_php_yenc_decode/
</code></pre>

<p>yydecode:</p>

<pre><code>   cd ~/
   mkdir -p yydecode
   cd yydecode/
   wget http://colocrossing.dl.sourceforge.net/project/yydecode/yydecode/0.2.10/yydecode-0.2.10.tar.gz
   tar -xzf yydecode-0.2.10.tar.gz
   cd yydecode-0.2.10/
   ./configure
   make
   sudo make install
   make clean
   cd ~/
   rm -rf yydecode/
</code></pre>

<p>Note: After installing you can change the yEnc setting in tmux edit accordingly.</p>

<h1>
<a id="threaded-scripts" class="anchor" href="#threaded-scripts" aria-hidden="true"><span class="octicon octicon-link"></span></a>Threaded Scripts:</h1>

<p>Tmux comes with php threaded scripts, python scripts are still there, but are not used, and will be removed in future</p>

<h1>
<a id="table-per-group" class="anchor" href="#table-per-group" aria-hidden="true"><span class="octicon octicon-link"></span></a>Table per group:</h1>

<p>Tmux can now be used with TPG ported from nZEDb, you need to run lib/testing/DB/convert_to_tpg.php to convert binaries, parts and partrepair tables, after this you will be able to use
  threaded releases.php</p>

<h1>
<a id="alternate-nntp-provider" class="anchor" href="#alternate-nntp-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Alternate NNTP provider:</h1>

<p>Newznab-tmux has added support for dual NNTP providers, you need to edit the provided config.php.example in www folder.</p>

<h1>
<a id="sphinx-support" class="anchor" href="#sphinx-support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sphinx support:</h1>

<p>Newznab-tmux now comes with its own Sphinx support, ported from nZEDb. Installation readme is in misc/sphinxsearch folder.</p>

<p>This version of tmux has many core newznab files modified, use at your own risk.</p>

<p>Tmux is started by following command in cli, from tmux folder: php tmux-ui.php start. Tmux can be gracefuly stopped in similar manner php tmux-ui.php stop.</p>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/DariusIII">DariusIII</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
